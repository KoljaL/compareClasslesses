<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAA7m0iAO7u7gD///8A/4IiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEREREREAAAERERREQRAAEREiIzNEEQEREiIjMzRBEREiERREM0QRESERFERDRBEREREURENEEREiIiMzM0QRESIiIzM0RBEREREUM0REERERERRDNEQRESIiIzMzRBERIiIjMzNEERERERREREQRERERFERERBERERERERERHgBwAAwAMAAIABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rel="icon" type="image/x-icon" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>compare Classlesses</title>

  <script>


  </script>
  <style>
    :root {
      --color-bg: #333;
      --color-text: #fff;
      --color-border: black;
      --width-border: 2px;
      --height-header: 2.5rem;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    ::-webkit-scrollbar {
      display: none;
    }

    html {
      font-size: 16px;
    }

    body {
      font-family: Arial, Helvetica, sans-serif;
      /* font-size: 16px; */
      line-height: 1.5;
      background-color: var(--color-bg);
      color: var(--color-text);
      height: 100vh;
    }

    header {
      height: var(--height-header);
      /* background: green; */
      padding: 1rem;
      padding-top: .5rem;
      position: fixed;
      top: 0;
      width: 100%;
      display: flex;
      flex-direction: row;
      justify-content: start;
      align-items: baseline;
      flex-wrap: wrap;
      gap: 1rem;
    }

    header h3 {
      white-space: nowrap;
    }

    header .preferences {
      display: flex;
      flex-direction: row;
      justify-content: space-around;
      gap: 1rem;
    }

    header .preferences label,
    header .selectFields label {
      white-space: nowrap;
    }


    main {
      display: flex;
      flex-direction: row;
      /* justify-content: space-around; */
      height: 100%;
      margin-top: 2.5rem;
    }

    main.column {
      flex-direction: column;
    }


    main .right,
    main .left {
      /* width: 50%; */
      flex-grow: 1;
      position: relative;
    }


    main .right iframe,
    main .left iframe {
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      width: 100%;
      height: 100%;
      /* display: none; */
      /* height: calc(100vh - var(--height-header) + 2 * var(--width-border)); */
      /* border-top: var(--width-border) solid var(--color-border); */

    }



    main .left {
      /* border-right: var(--width-border) solid var(--color-border); */
    }

    main.column .right,
    main.column .left {
      width: 100%;
      height: 50%;
      border: none;
    }


    main .selectFieldsRight,
    main .selectFieldsLeft {
      position: absolute;
      top: 0;
      background: #333;
      border-bottom: var(--width-border) solid var(--color-border);
      right: 0;
      padding-top: 0;
      padding-bottom: .25rem;
      padding-inline: .5rem;
      border-left: var(--width-border) solid var(--color-border);
      border-bottom-left-radius: .5rem;
      display: flex;
      gap: .75rem;
      z-index: 1;
    }

    select {
      cursor: pointer;
      padding: 0.1rem;
      padding-left: .5rem;
      font-size: 1rem;
      border: 1px solid rgb(140, 140, 140);
      color: var(--color-text);
      background-color: var(--color-bg);
      border-radius: 4px;
      width: 80px;
      max-width: 80px;
    }

    label {
      color: rgb(140, 140, 140);
    }

    input[type="checkbox"] {
      cursor: pointer;
      width: 1rem;
      height: 1rem;
      border: 1px solid rgb(140, 140, 140);
      border-radius: 4px;
      accent-color: var(--color-bg);
      color: var(--color-text);
    }


    iframe {
      width: 100%;
      height: calc(100vh - var(--height-header) + 2 * var(--width-border));
      border-top: var(--width-border) solid var(--color-border);
    }

    .column iframe {
      width: 100%;
      height: calc(50vh - 2.25rem);
      border: 2px var(--width-border) solid var(--color-border);
    }

    .resizerDIV {
      width: 10px;
      background-color: var(--color-bg);
      border: 2px solid black;
      cursor: col-resize;
      transition: all 0.2s ease-in-out;
    }

    .resizerDIV:hover {
      background-color: var(--color-text);

    }

    .column .resizerDIV {
      height: 10px;
      width: 100%;
      cursor: row-resize;
    }

    @media screen and (max-width: 1250px) {

      html {
        font-size: 12px;
      }


      main {
        flex-direction: column;
      }

      main .right,
      main .left {
        width: 100%;
        border: none;
      }

      main .selectFieldsLeft {
        border-right: none;
        top: 0;
      }

      main .selectFieldsRight {
        /* top: 2px; */
        /* right: 2px; */

      }

      iframe {
        width: 100%;
        height: calc(50vh - 1rem);
        /* border: 2px solid #333; */
      }

      #frameDirectionLabel {
        display: none;
      }

      .resizerDIV {
        height: 10px;
        width: 100%;
      }
    }
  </style>
</head>

<body>

  <header>
    <h3>compare Classlesses</h3>
    <div class="preferences">
      <label for="scrollSync">
        <input type="checkbox" name="scrollSync" id="scrollSync">
        Sync Scrolling
      </label>
      <label for="frameDirection" id="frameDirectionLabel">
        <input type="checkbox" name="frameDirection" id="frameDirection">
        Frame Direction
      </label>
    </div>
  </header>

  <main>
    <div class="left">
      <div class="selectFieldsLeft">
        <label for="demoSelectLeft">HTML
          <select name="demoleft" id="demoSelectLeft"></select>
        </label>
        <label for="leftSelect">CSS
          <select name="left" id="leftSelect"></select>
        </label>
      </div>
      <iframe src="picoDemo.html" frameborder="0"></iframe>
    </div>
    <div class="resizerDIV"></div>
    <div class="right">
      <div class="selectFieldsRight">
        <label for="demoSelectRight">HTML
          <select name="demoright" id="demoSelectRight"></select>
        </label>
        <label for="rightSelect">CSS
          <select name="right" id="rightSelect"></select>
        </label>
      </div>
      <iframe src="picoDemo.html" frameborder="0"></iframe>
    </div>
  </main>
  <script>
    // https://github.com/dbohdan/classless-css
    const demos = [
      {
        "name": "Plain",
        "demo": "./plain.html",
        "url": "https://www.picoctf.org/"
      },
      {
        "name": "Pico",
        "demo": "./picoDemo.html",
        "url": "https://www.picoctf.org/"
      },

      {
        "name": "Almond",
        "demo": "./almondDemo.html",
        "url": "https://www.picoctf.org/"
      }, {
        "name": "Pure",
        "demo": "./pureDemo.html",
        "url": "https://www.picoctf.org/"
      }
    ];

    const classlesses = [
      {
        "name": "Plain",
        "classless": "./css/plain.css",
        "url": "https://www.picoctf.org/"
      },
      {
        "name": "Latex",
        "classless": "./css/latex.css",
        "url": "https://github.com/davidrzs/latexcss"
      },
      {
        "name": "Pico",
        "classless": "./css/pico.css",
        "url": "https://www.picoctf.org/"
      },
      {
        "name": "Almond",
        "classless": "./css/almond.css",
        "url": "https://www.picoctf.org/"
      },
      {
        "name": "Pure",
        "classless": "./css/pure.css",
        "url": "https://www.picoctf.org/"
      }
    ];


    const leftSelect = document.querySelector('#leftSelect');
    const rightSelect = document.querySelector('#rightSelect');
    const resizerDIV = document.querySelector('.resizerDIV');
    const left = document.querySelector('.left');
    const leftIframe = document.querySelector('.left iframe');
    const right = document.querySelector('.right');
    const rightIframe = document.querySelector('.right iframe');
    const demoSelectLeft = document.querySelector('#demoSelectLeft');
    const demoSelectRight = document.querySelector('#demoSelectRight');
    const scrollSync = document.querySelector('#scrollSync');
    const frameDirection = document.querySelector('#frameDirection');
    const main = document.querySelector('main');



    var selectedDemoLeft = demos[3].demo;
    var selectedDemoRight = demos[0].demo;
    var selectedClasslessLeft = classlesses[4].classless;
    var selectedClasslessRight = classlesses[1].classless;


    // load the same classless in both iframes
    document.addEventListener('DOMContentLoaded', () => {
      leftSelect.value = selectedClasslessLeft;
      rightSelect.value = selectedClasslessRight;
      demoSelectLeft.value = selectedDemoLeft;
      demoSelectRight.value = selectedDemoRight;
      leftIframe.src = `${selectedDemoLeft}?classless=${selectedClasslessLeft}`;
      rightIframe.src = `${selectedDemoRight}?classless=${selectedClasslessRight}`;
      initResizer()
    });

    window.addEventListener('resize', initResizer);


    //
    // initialize the resizer
    //
    function initResizer() {
      if (window.matchMedia("(max-width: 1250px)").matches) {
        resize(resizerDIV, left, right, 'vertical')
      } else {
        resize(resizerDIV, left, right, 'horizontal')
      }
    }

    //
    // populate the demo select element
    //
    demos.forEach((demo) => {
      const optionLeft = document.createElement('option');
      const optionRight = document.createElement('option');
      optionLeft.value = demo.demo;
      optionRight.value = demo.demo;
      optionLeft.innerText = demo.name;
      optionRight.innerText = demo.name;
      demoSelectLeft.appendChild(optionLeft);
      demoSelectRight.appendChild(optionRight);
    });


    //
    // load the same demo in both iframes
    //
    demoSelectLeft.addEventListener('change', () => {
      selectedDemoLeft = demoSelectLeft.value;
      leftIframe.src = `${selectedDemoLeft}?classless=${leftSelect.value}`;
    });
    demoSelectRight.addEventListener('change', () => {
      selectedDemoRight = demoSelectRight.value;
      rightIframe.src = `${selectedDemoLeft}?classless=${rightSelect.value}`;
    });


    //
    // populate the select elements with the classlesses
    //
    classlesses.forEach((classless) => {
      const option = document.createElement('option');
      option.value = classless.classless;
      option.innerText = classless.name;
      leftSelect.appendChild(option.cloneNode(true));
      rightSelect.appendChild(option.cloneNode(true));
    });


    //
    // load the same classless in both iframes 
    //
    leftSelect.addEventListener('change', () => {
      selectedClasslessLeft = leftSelect.value || selectedClasslessLeft;
      leftIframe.src = `${selectedDemoLeft}?classless=${leftSelect.value}`;
    });
    rightSelect.addEventListener('change', () => {
      selectedClasslessRight = rightSelect.value || selectedClasslessRight;
      rightIframe.src = `${selectedDemoLeft}?classless=${rightSelect.value}`;
    });



    //
    // toggle sync scrolling  
    //
    scrollSync.addEventListener('change', () => {
      if (scrollSync.checked) {
        leftIframe.contentWindow.addEventListener('scroll', handleLeftScroll);
        rightIframe.contentWindow.addEventListener('scroll', handleRightScroll);
      } else {
        leftIframe.contentWindow.removeEventListener('scroll', handleLeftScroll);
        rightIframe.contentWindow.removeEventListener('scroll', handleRightScroll);
      }
    });

    const handleLeftScroll = () => {
      rightIframe.contentWindow.scrollTo({
        top: leftIframe.contentWindow.scrollY,
        left: leftIframe.contentWindow.scrollX,
      });
    };

    const handleRightScroll = () => {
      leftIframe.contentWindow.scrollTo({
        top: rightIframe.contentWindow.scrollY,
        left: rightIframe.contentWindow.scrollX,
      });
    };


    //
    // toggle frame direction
    //
    frameDirection.addEventListener('change', () => {
      if (frameDirection.checked) {
        resize(resizerDIV, left, right, 'vertical')
        main.classList.add('column');
      } else {
        resize(resizerDIV, left, right, 'horizontal')
        main.classList.remove('column');
      }
    });

    /**
     *
     * resize elements
     *
     */
    function resize(resizer, prevEl, nextEl, direction = 'horizontal') {
      let x = 0
      let y = 0
      let NextMaxWidth = 0
      let PrevMaxWidth = 0
      let NextMaxHeight = 0
      let PrevMaxHeight = 0


      // if eventhandler exists, remove it and reset the elements
      if (resizer.onmousedown) {
        resizer.onmousedown = null
        prevEl.style.width = ''
        prevEl.style.maxWidth = ''
        prevEl.style.height = ''
        prevEl.style.maxHeight = ''
        nextEl.style.width = ''
        nextEl.style.maxWidth = ''
        nextEl.style.height = ''
        nextEl.style.maxHeight = ''
      }


      const mouseDownHandler = function (e) {
        // console.log('resizer', resizer)
        // console.log('direction', direction)
        // console.log('prevEl', prevEl)
        // console.log('nextEl', nextEl)
        // console.log(' ')

        if (direction === 'horizontal') {
          x = e.clientX
          PrevWidth = prevEl.getBoundingClientRect().width
          PrevMaxWidth = prevEl.getBoundingClientRect().width
          NextMaxWidth = nextEl.getBoundingClientRect().width
        }
        // vertically
        else {
          y = e.clientY
          PrevHeight = prevEl.getBoundingClientRect().height
          PrevMaxHeight = prevEl.getBoundingClientRect().height
          NextMaxHeight = nextEl.getBoundingClientRect().height
        }
        // add event listeners
        document.addEventListener('mousemove', mouseMoveHandler)
        document.addEventListener('mouseup', mouseUpHandler)
      }

      const mouseMoveHandler = function (e) {
        if (direction === 'horizontal') {
          const dx = e.clientX - x
          const newPrevMaxWidth = PrevMaxWidth + dx
          const newNextMaxWidth = NextMaxWidth - dx
          const newPrevWidth = ((PrevWidth + dx) * 100) / resizer.parentNode.getBoundingClientRect().width
          prevEl.style.width = `${newPrevWidth}%`
          prevEl.style.maxWidth = `${newPrevMaxWidth}px`
          nextEl.style.maxWidth = `${newNextMaxWidth}px`
          // STYLE
          resizer.style.cursor = 'col-resize'
          document.body.style.cursor = 'col-resize'
        }
        // vertically
        else {
          const dy = e.clientY - y
          const newPrevMaxHeight = PrevMaxHeight + dy
          const newNextMaxHeight = NextMaxHeight - dy
          const newPrevHeight = ((PrevHeight + dy) * 100) / resizer.parentNode.getBoundingClientRect().height

          prevEl.style.height = `${newPrevHeight}%`
          prevEl.style.maxHeight = `${newPrevMaxHeight}px`
          nextEl.style.maxHeight = `${newNextMaxHeight}px`
          // STYLE
          resizer.style.cursor = 'row-resize'
          document.body.style.cursor = 'row-resize'
        }
        // STYLE
        prevEl.style.userSelect = 'none'
        prevEl.style.pointerEvents = 'none'
        nextEl.style.userSelect = 'none'
        nextEl.style.pointerEvents = 'none'
      }

      const mouseUpHandler = function () {
        document.removeEventListener('mousemove', mouseMoveHandler)
        document.removeEventListener('mouseup', mouseUpHandler)

        // STYLE
        resizer.style.removeProperty('cursor')
        document.body.style.removeProperty('cursor')
        prevEl.style.removeProperty('user-select')
        prevEl.style.removeProperty('pointer-events')
        nextEl.style.removeProperty('user-select')
        nextEl.style.removeProperty('pointer-events')
      }

      // resizer.addEventListener('mousedown', mouseDownHandler)
      resizer.onmousedown = function (e) {mouseDownHandler(e)};
    }
  </script>
</body>

</html>